<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bs.mapper.NewsMapper">
	<resultMap type="com.bs.entity.News"
		id="news">
		<id column="id" property="id" />
		<result column="pic" property="pic" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="create_time" property="createTime" />
	</resultMap>
	 
	<insert id="addNews" parameterType="com.bs.entity.News">
	insert into news(pic,title,content,create_time,flag)
	value(#{pic},#{title},#{content},NOW(),#{flag})
	</insert>
	
	<update id="updateNews" parameterType="com.bs.entity.News">
	update news
		<trim prefix="set" suffixOverrides=",">
			<if test="pic!=null and pic!=''">pic=#{pic},</if>
			<if test="title!=null and title!=''">title=#{title},</if>
			<if test="createTime!=null and createTime!=''">create_time=NOW(),</if>
			<if test="content!=null and content!=''">content=#{content},</if>
			<if test="flag!=null">flag=#{flag},</if>
		</trim>
		where id=#{id}
	</update>
	
	<delete id="deleteNews" parameterType="int">
	delete from news where id=#{id}
	</delete>
	
	<select id="findNews" parameterType="com.bs.entity.News" resultMap="news">
	select
		id,pic,title,content,create_time,flag
		from news
		<where>
			<if test="id!=null and id!=''">id=#{id}</if>
			<if test="pic!=null and pic!=''">and pic=#{pic}</if>
			<if test="title!=null and title!=''">and title like '%${title}%'</if>
			<if test="content!=null and content!=''">and content=#{content}</if>
			<if test="flag!=null">and flag=#{flag}</if>
		</where>
	</select>
</mapper>